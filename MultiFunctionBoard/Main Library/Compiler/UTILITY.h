/*
*-----------------------------------------------------------------------------------------------------------------

*-----------------------------------------------------------------------------------------------------------------
*/

#ifndef  __UTILITY_H
#define  __UTILITY_H

/*
*-----------------------------------------------------------------------------------------------------------------*
*                                                     INCLUDES
*-----------------------------------------------------------------------------------------------------------------*
*/

/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                                   # D E F I N E S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/



/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                              # G L O B A L  M A C R O S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/

/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                           G L O B A L  D A T A   T Y P E S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/



/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                           G L O B A L   V A R I A B L E S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/
#if 0
#define UTI_vmWaitOnEvent(EVENT, TIME_OUT, STATE)\
    INT32U        u32TimeStampTimeout;\
    INT32U        u32TimeStampStart;\
    INT32U        u32TimeStampCurrent;\
    STATE = E_OK;\
    u32TimeStampStart = Timestamp_get32();\
    u32TimeStampTimeout = u32TimeStampStart + (TIME_OUT * (SYSTEM_FREQUENCY / 1000));\
    if (u32TimeStampTimeout > u32TimeStampStart)\
    {\
        u32TimeStampStart = ~0;\
    }\
    do\
    {\
        u32TimeStampCurrent = Timestamp_get32();\
        Task_sleep(1);\
    }while((EVENT) && ((u32TimeStampCurrent <= u32TimeStampTimeout) || (u32TimeStampCurrent >= u32TimeStampStart)));\
    if(EVENT)\
    {\
        STATE = E_NOT_OK;\
    }
#endif
#define UTI_u32mRTCSecondTimer()    (HWREG(HIB_RTCC))
#define UTI_u64mRTCMiliSecondTimer()    \
       ((HWREG(HIB_RTCC) * 1000) + (((1000 * (UInt64)(HWREG(HIB_RTCSS) & 0x7fff))) / 32768))

#define UTI_vmWaitOnEvent(EVENT, TIME_OUT, STATE)\
    INT32U        u32TimeStampStart;\
    STATE = E_OK;\
    u32TimeStampStart = UTI_u32mRTCSecondTimer() + TIME_OUT;\
    do\
    {\
        Task_sleep(1);\
    }while((EVENT) && (UTI_u32mRTCSecondTimer() < u32TimeStampStart));\
    if(EVENT)\
    {\
        STATE = E_NOT_OK;\
    }

/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                                   E X T E R N A L S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/


/*
*-----------------------------------------------------------------------------------------------------------------*
*---------------------------------------------------------------------------------------------------------------
*                                    G L O B A L  F U N C T I O N   P R O T O T Y P E S
*---------------------------------------------------------------------------------------------------------------
*-----------------------------------------------------------------------------------------------------------------*
*/

#ifdef __cplusplus
extern "C" {
#endif

/* Put the functions here */
void UTIL_vSwapBytes(INT8U *pu8BytesUnderSwaping, INT8U u8NumberOfBytes);
void UTIL_ftoa(float n, char* res, int afterpoint);
void UTIL_vNonOSDelayMiliSeconds(INT32U u32DelayMiliseconds);
#ifdef __cplusplus
}
#endif


/*
*-----------------------------------------------------------------------------------------------------------------*
*                                                     MODULE END
*-----------------------------------------------------------------------------------------------------------------*
*/
#endif



